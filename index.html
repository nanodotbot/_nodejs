<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node.js</title>
    <link rel="stylesheet" href="./css/general.css">
    <script src="./js/textarea.js" defer></script>
</head>
<body>
    <header>
        <h1>Node.js</h1>
    </header>
    <main>
        <nav id="nav">
            <h2>Introduction to Node.js</h2>
            <section>
                <a href="#backend">Backend</a>
                <a href="#settingupnode">Setting up Node</a>
                <a href="#repl">Node REPL</a>
                <a href="#global">Node global object</a>
                <a href="#runningaprogram">Running a program with Node</a>
                <a href="#coremodules">Core modules</a>
                <a href="#consolemodule">The Console Module</a>
                <a href="#processmodule">The Process Module</a>
                <a href="#processmodule2">The Process Module (2)</a>
                <a href="#osmodule">The OS Module</a>
                <a href="#osmodule2">The OS Module (2)</a>
                <a href="#utilmodule">The Util Module</a>
                <a href="#utilmodule2">The Util Module (2)</a>
                <a href="#npm">Node Package Manager</a>
                <a href="#npm2">Node Package Manager (2)</a>
                <a href="#implementingmodules">Implementing modules</a>
            </section>
            <section>
                <a href="#nodeessentials">Node.js essentials</a>
                <a href="#settingupserver">Setting up a Server with HTTP</a>
            </section>
        </nav>
        <article>
            <h2>Backend</h2>
            <p><a href="https://www.codecademy.com/article/what-is-rdbms-sql" target="_blank" rel="noopener noreferrer">relational databases</a>: <a href="https://www.mysql.com/" target="_blank" rel="noopener noreferrer">MySQL</a>, <a href="https://www.postgresql.org/" target="_blank" rel="noopener noreferrer">PostgreSQL</a> | <a href="https://en.wikipedia.org/wiki/NoSQL" target="_blank" rel="noopener noreferrer">non-relational databases</a>: <a href="https://www.mongodb.com/" target="_blank" rel="noopener noreferrer">MongoDB</a>, <a href="https://redis.io/" target="_blank" rel="noopener noreferrer">Redis</a> | API = Application Programming Interface | Authorization & Authentication | <a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/First_steps/Web_frameworks#a_few_good_web_frameworks" target="_blank" rel="noopener noreferrer">Backend Frameworks</a>: <a href="https://laravel.com/" target="_blank" rel="noopener noreferrer">Laravel</a> - PHP, <a href="https://expressjs.com/" target="_blank" rel="noopener noreferrer">Express.js</a> - JavaScript, <a href="https://rubyonrails.org/" target="_blank" rel="noopener noreferrer">Ruby on Rails</a> - Ruby, <a href="https://spring.io/" target="_blank" rel="noopener noreferrer">Spring</a> - Java, <a href="https://www.oracle.com/java/technologies/javaserverfaces.html" target="_blank" rel="noopener noreferrer">JSF</a> - Java, <a href="https://flask.palletsprojects.com/en/2.2.x/" target="_blank" rel="noopener noreferrer">Flask</a> - Python, <a href="https://www.djangoproject.com/" target="_blank" rel="noopener noreferrer">Django</a> - Python, <a href="https://dotnet.microsoft.com/en-us/learn/aspnet/what-is-aspnet" target="_blank" rel="noopener noreferrer">ASP.NET</a> - C# | <a href="https://www.ecma-international.org/publications-and-standards/standards/ecma-404/" target="_blank" rel="noopener noreferrer">JSON = JavaScript Object Notation</a> | <a href="https://www.codecademy.com/courses/learn-node-js/articles/what-is-json" target="_blank" rel="noopener noreferrer">JSON</a> has become the de facto standard that facilitates storing and sending data between all programming languages | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" target="_blank" rel="noopener noreferrer">mdn</a> | <a href="https://nodejs.org/api/" target="_blank" rel="noopener noreferrer">node documentation</a> | <a href="https://www.codecademy.com/learn/learn-node-js/modules/intro-to-node-js/cheatsheet" target="_blank" rel="noopener noreferrer">introduction cheatsheet</a> | </p>
        </article>
        <article id="settingupnode">
            <h2>Setting up Node</h2>
            <a href="https://nodejs.org/en/" target="_blank">https://nodejs.org/en/</a>
            <a href="https://www.codecademy.com/article/setting-up-node-locally" target="_blank" rel="noopener noreferrer">setting up node</a>
            <pre class="code-block"><code>which node</code></pre>
            <pre class="code-block"><code>node -v</code></pre>
        </article>
        <article id="repl">
            <h2>The Node REPL</h2>
            <p><a href="https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop" target="_blank" rel="noopener noreferrer">read-eval-print loop</a></p>
            <pre class="code-block"><code>$ node
> console.log('Hello World')</code></pre>
            <pre class="code-block"><code>$ node
> .editor
const greeting = 'Hello World'
console.log(greeting)</code></pre>
            <p>Ctrl + d</p>
        </article>
        <article id="global">
            <h2>JavaScript global objects</h2>
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects" target="_blank">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects</a>
            <h2>Node global object</h2>
            <a href="https://nodejs.org/api/globals.html" target="_blank">https://nodejs.org/api/globals.html</a>
            <pre class="code-block"><code>$ node
> console.log(global)</code></pre>
            <pre class="code-block"><code>> global</code></pre>
            <pre class="code-block"><code>> Object.keys(global)</code></pre>
            <p>add property to global:</p>
            <pre class="code-block"><code>global.cat = 'meow!'
> console.log(global.cat)</code></pre>
        </article>
        <article id="runningaprogram">
            <h2>Running a program with Node</h2>
            <pre class="code-block"><code>$ node kitten.js</code></pre>
        </article>
        <article id="coremodules">
            <h2>Core modules</h2>
            <p>modularity - different modules to build a cohesive whole</p>
            <p>built-in modules = core modules - in the lib/ folder</p>
            <pre class="code-block"><code><span class="code-comment">// Require in the 'events' core module:</span>
<span class="code-keyword">const</span> <span class="code-variable">events</span> = <span class="code-function">require</span>(<span class="code-string">'events'</span>);</code></pre>
<pre class="code-block"><code>$ node
> require('module').builtinModules</code></pre>
        <a href="https://www.w3schools.com/nodejs/ref_modules.asp" target="_blank">https://www.w3schools.com/nodejs/ref_modules.asp</a>
        </article>
        <article id="consolemodule">
            <h3>The Console Module</h3>
            <p>global module - can be accessed from anywhere, require() is not necessary</p>
            <p>print messages to the terminal</p>
            <pre class="code-block"><code>console.log()</code></pre>
            <p>print a message to the terminal if the value is falsy</p>
            <pre class="code-block"><code>console.assert()</code></pre>
            <p>print out a table in the terminal from an object or array</p>
            <pre class="code-block"><code>console.table()</code></pre>
        </article>
        <article id="processmodule">
            <h3>The Process Module</h3>
            <p>global object, that stores and controls information about the environment in which the process is currently running</p>
            <pre class="code-block"><code>process.env</code></pre>
            <p>convention: add property with key <code>NODE_ENV</code> and value of either <code>production</code> or <code>depelopment</code></p>
            <pre class="code-block"><code>if (process.env.NODE_ENV === 'development'){
    console.log('Testing! Testing! Does everything work?');
}</code></pre>
        </article>
        <article id="processmodule2">
            <h3>The Process Module (2)</h3>
            <p>get the current working directory</p>
            <pre class="code-block"><code>process.pwd()</code></pre>
            <p>information on memory demands of current process</p>
            <pre class="code-block"><code>process.memoryUsage()</code></pre>
            <p>how many bytes of memory the current process is using</p>
            <pre class="code-block"><code>process.memoryUsage().heapUsed</code></pre>
            <p>array of command line values provided when the current process was initiated: (1) absolute path to Node, which ran the process (2) path to the file that’s running (3+) any command line arguments provided when the process was initiated</p>
            <pre class="code-block"><code>process.argv</code></pre>
            <a href="https://nodejs.org/api/process.html" target="_blank">https://nodejs.org/api/process.html</a>
        </article>
        <article id="osmodule">
            <h3>The OS Module</h3>
            <p>not global - operating system information</p>
            <pre class="code-block"><code>const os = require('os');</code></pre>
            <p>return computer's operating system</p>
            <pre class="code-block"><code>os.type()</code></pre>
            <p>return computer's cpu architecture</p>
            <pre class="code-block"><code>os.arch()</code></pre>
            <p>return information about network interfaces</p>
            <pre class="code-block"><code>os.networkInterfaces()</code></pre>
        </article>
        <article id="osmodule2">
            <h3>The OS Module (2)</h3>
            <p>return information about the current working directory</p>
            <pre class="code-block"><code>os.homedir()</code></pre>
            <p>return information about the current user</p>
            <pre class="code-block"><code>os.userInfo()</code></pre>
            <p>return hostname of the operating system</p>
            <pre class="code-block"><code>os.hostname()</code></pre>
            <p>return system uptime</p>
            <pre class="code-block"><code>os.uptime()</code></pre>
            <a href="https://nodejs.org/docs/latest-v14.x/api/os.html" target="_blank">https://nodejs.org/docs/latest-v14.x/api/os.html</a>
        </article>
        <article class="utilmodule">
            <h3>The Util Module</h3>
            <p>utility functions - used to maintain and debug code</p>
            <pre class="code-block"><code>const util = require('util');</code></pre>
            <a href="https://nodejs.org/api/util.html" target="_blank">https://nodejs.org/api/util.html</a>                
        </article>
        <article class="utilmodule2">
            <h3>util.types</h3>
            <p>type checks for different kinds of built-in objects</p>
            <pre class="code-block"><code>const today = new Date();
const earthDay = 'April 22, 2022';

console.log(util.types.isDate(today)); // true
console.log(util.types.isDate(earthDay)); // false</code></pre>
            <h3>util.promisify</h3>
            <p>converts a callback-based function to a promise-based function</p>
            <pre class="code-block"><code>const callbackPromise = util.promisify(callbackFunction);</code></pre>   
        </article>
        <article id="npm">
            <h2>Node Package Manager</h2>
            <p><a href="https://www.codecademy.com/courses/learn-node-js/articles/node-package-manager" target="_blank" rel="noopener noreferrer">npm codecademy</a></p>
            <p>package manager for node.js | dependencies</p>
            <a href="https://www.npmjs.com/" target="_blank">https://www.npmjs.com/</a>
            <pre class="code-block"><code>npm -v</code></pre>
            <h2>Initializing a node.js app</h2>
            <pre class="code-block"><code>npm init</code></pre>
            <p>package.json with information about project</p>
            <a href="https://docs.npmjs.com/cli/v7/configuring-npm/package-json" target="_blank">https://docs.npmjs.com/cli/v7/configuring-npm/package-json</a>
            <p><code>"dependencies"</code> dictionary</p>
        </article>
        <article id="npm2">
            <h2>Installing a package</h2>
            <p>install a package locally</p>
            <pre class="code-block"><code>npm install nodemon</code></pre>
            <a href="https://www.npmjs.com/package/nodemon" target="_blank">https://www.npmjs.com/package/nodemon</a>
            <p>install as a development dependency - not included in production release</p>
            <pre class="code-block"><code>npm install nodemon --save-dev</code></pre>
            <p>install a package globally - stored in a separate global node_modules/ folder</p>
            <p><a href="https://www.npmjs.com/package/http-server" target="_blank" rel="noopener noreferrer">http-server</a></p>
            <pre class="code-block"><code>npm install http-server -g</code></pre>
            <a href="https://docs.npmjs.com/cli/v7/configuring-npm/folders" target="_blank">https://docs.npmjs.com/cli/v7/configuring-npm/folders</a>
            <p>install all packages from a package.json</p>
            <pre class="code-block"><code>npm i</code></pre>
            <pre class="code-block"><code>npm i --production</code></pre>
        </article>
        <article id="implementingmodules">
            <h2>Implementing Modules in Node
            </h2>
            <a href="https://nodejs.org/docs/latest-v14.x/api/modules.html" target="_blank">https://nodejs.org/docs/latest-v14.x/api/modules.html</a>
            <a href="#moduleexports">module.exports</a>
            <a href="#require">require()</a>
            <a href="#objectdestruction">Object Destruction</a>
        </article>
        <article id="moduleexports">
            <h3>module.exports</h3>
            <pre class="code-block"><code>/* shape-area.js */
const PI = Math.PI;

// Define and export circleArea() and squareArea() below
module.exports.circleArea = radius => PI * radius * radius;
module.exports.squareArea = side => side**2;</code></pre>
        </article>
        <article id="require">
            <h3>require()</h3>
            <pre class="code-block"><code>/* app.js */ 

const radius = 5;
const sideLength = 10;

// Option 1: import the entire shape-area.js module here.

const areaFunctions = require('./shape-area.js');
                
// use the imported .circleArea() and .squareArea() methods here

const areaOfCircle = areaFunctions.circleArea(radius);

const areaOfSquare = areaFunctions.squareArea(sideLength);</code></pre>
        </article>
        <article id="objectdestruction">
            <h3>Object Destruction</h3>
            <pre class="code-block"><code>/* app.js */

const radius = 5;
const sideLength = 10;
                
// Option 2: import circleArea and squareArea with object destructuring

const { circleArea, squareArea } = require('./shape-area.js');

// use the imported .circleArea() and .squareArea() methods here

const areaOfCircle = circleArea(radius);

const areaOfSquare = squareArea(10);</code></pre>
        </article>
        <nav id="nodeessentials">
            <h1>Node.js essentials</h1>
            <section>
                <a href="https://www.codecademy.com/learn/learn-node-js/modules/node-js-essentials/cheatsheet" target="_blank" rel="noopener noreferrer">node essentials cheatsheet</a>
                <hr>
                <a href="#eventsmodule">The Events Module</a>
                <a href="#userinputoutput">User Input/Output</a>
                <a href="#errormodule">Error Module</a>
                <a href="#buffer">Buffer Module</a>
                <a href="#fsmodule">FS Module</a>
            </section>
            <section>
                <a href="#settingupserver">Setting up a Server with HTTP</a>
            </section>
        </nav>
        <article id="eventsmodule">
            <h2>The Events Module</h2>
            <p>event-emitter module</p>
            <pre class="code-block"><code>// Require in the 'events' core module
const events = require('events');
// Create an instance of the EventEmitter class
const myEmitter = new events.EventEmitter();

let newUserListener = (data) => {
    console.log(`We have a new user: ${data}.`);
};
   
// Assign the newUserListener function as the listener callback for 'new user' events
myEmitter.on('new user', newUserListener)
   
// Emit a 'new user' event
myEmitter.emit('new user', 'Lily Pad') //newUserListener will be invoked with 'Lily Pad'</code></pre>
            <a href="https://nodejs.org/api/events.html" target="_blank">https://nodejs.org/api/events.html</a>
        </article>
        <article id="userinputoutput">
            <h2>User Input/Output</h2>
            <p>user input through terminal using stdin.on() method on the process object</p>
            <a href="https://nodejs.org/api/buffer.html#buffer_buffer" target="_blank">https://nodejs.org/api/buffer.html#buffer_buffer</a>
            <pre class="code-block"><code>// number.js
let secretValue = Math.floor(1+Math.random()*10).toString();
let numbers = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10'];

const checkNumber = (input) => {
    if (input === 'quit') {
        process.stdout.write('byebye');
        process.exit();
    }
    if (!numbers.includes(input)) {
        process.stdout.write('number must be one from 1 through 10')
    } else if (input === secretValue) {
        process.stdout.write('rock n roll');
        process.exit();
    } else {
        process.stdout.write('guess again');
    }
};

process.stdout.write('enter a number from 1 through 10');

const playGame = (userInput) => {
    const input = userInput.toString().trim();
    checkNumber(input);
}

process.stdin.on('data', playGame);</code></pre>
        </article>
        <article id="errormodule">
            <h2>Error Module</h2>
            <p>global scope | all the standard JavaScript errors such as EvalError, SyntaxError, RangeError, ReferenceError, TypeError, and URIError as well as the JavaScript Error class for creating new error instances (throw) | try...catch with synchronous code | asynchronous error-first callback functions—callback functions: error as the first expected argument, data as the second argument</p>
<pre class="code-block"><code>const api = require('./api.js');
api.errorProneAsyncApi('problematic input', errorFirstCallback);

// An error-first callback
let errorFirstCallback = (err, data) => {
    if (err) {
        console.log(`Something went wrong. ${err}\n`);
    } else {
        console.log(`Something went right. Data: ${data}\n`);
    }
};</code></pre>
            
        </article>

        <article id="buffer">
            <h2>Buffer Module</h2>
            <p>global scope | handles binary data | Buffer objects are similar to an array of integers where each element in the array represents a byte of data (integers from 0 to 255 inclusive) | .alloc() creates a new Buffer object with the size specified as the first parameter | .toString() translates the Buffer object into a human-readable string | .from() to create a new Buffer object from the specified string, array, or buffer | .concat() joins all buffer objects passed in an array into one Buffer object</p>
<pre class="code-block"><code>const buffer = Buffer.alloc(5);
console.log(buffer); // Ouput: [0, 0, 0, 0, 0]</code></pre>
<pre class="code-block"><code>const buffer = Buffer.alloc(5, 'a');
console.log(buffer.toString()); // Output: aaaaa</code></pre>
            <pre class="code-block"><code>const buffer = Buffer.from('hello');
console.log(buffer); // Output: [104, 101, 108, 108, 111]</code></pre>
<pre class="code-block"><code>const buffer1 = Buffer.from('hello'); // Output: [104, 101, 108, 108, 111]
const buffer2 = Buffer.from('world'); // Output:[119, 111, 114, 108, 100]
const array = [buffer1, buffer2];
const bufferConcat = Buffer.concat(array);
    
console.log(bufferConcat); // Output: [104, 101, 108, 108, 111, 119, 111, 114, 108, 100]</code></pre>
        </article>

        <article id="fsmodule">
            <h2>FS Module</h2>
            <p>fs core module is an API for interacting with the file system | .readFile() method which reads data from a provided file | </p>
            <pre class="code-block"><code>const fs = require('fs');
 
let readDataCallback = (err, data) => {
    if (err) {
    console.log(`Something went wrong: ${err}`);
    } else {
    console.log(`Provided file contained: ${data}`);
    }
};
    
fs.readFile('./file.txt', 'utf-8', readDataCallback);</code></pre>
        </article>

        <article id="readablestreams">
            <h2>Readable Streams</h2>
            <p>.createInterface() from the readline core module returns an EventEmitter set up to emit 'line' events | </p>
            <pre class="code-block"><code>const readline = require('readline');
const fs = require('fs');
    
const myInterface = readline.createInterface({
    input: fs.createReadStream('text.txt')
});
    
myInterface.on('line', (fileLine) => {
    console.log(`The line read: ${fileLine}`);
});</code></pre>
        </article>

        <article>
            <h2>Writable Streams</h2>
            <p>fs.createWriteStream()</p>
            <pre class="code-block"><code>const fs = require('fs');
 
const fileStream = fs.createWriteStream('output.txt');
    
fileStream.write('This is the first line!'); 
fileStream.write('This is the second line!');
fileStream.end();</code></pre>
        </article>
        <article>
            <h2>Timers Module</h2>
            <p>global | <a href="https://nodejs.org/api/timers.html#timers_class_immediate" target="_blank" rel="noopener noreferrer">timers</a> | unlike front-end timer function they are added to the <a href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/" target="_blank" rel="noopener noreferrer">event loop</a> | <a href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/#setimmediate-vs-settimeout" target="_blank" rel="noopener noreferrer">setImmediate()</a> | </p>
            <pre class="code-block"><code>setImmediate(() => {
    console.log('Hello, Aisle Nevertell!')
});</code></pre>
        </article>

        <nav id="settingupserver">
            <h2>Setting up a Server with HTTP</h2>
            <section>
                <a href="https://www.codecademy.com/learn/learn-node-js/modules/setting-up-a-server-with-http/cheatsheet" target="_blank" rel="noopener noreferrer">cheatsheet</a>
            </section>
            <section>
                <a href="#introduction">Introduction to HTTP</a>
                <a href="#httpmodule">HTTP Module</a>
                <a href="#anatomyurl">The Anatomy of the URL</a>
                <a href="#urlmodule">The URL Module</a>
                <a href="#querystringmodule">Query String Module</a>
                <a href="#routing">Routing</a>
                <a href="#httpstatuscodes">HTTP Status Codes</a>
                <a href="#interactingdatabase">Interacting with a Database</a>
                <a href="#interactingapi">Interacting with another API</a>
                <a href="#rest">REST</a>
            </section>
        </nav>
        
        <article id="introduction">
            <h2>Introduction to HTTP</h2>
            <p>Hypertext Transfer Protocol | a request-response protocol that serves as the foundation of data exchange and communication within the client-server computing model | <a href="https://www.codecademy.com/article/use-devtools" target="_blank" rel="noopener noreferrer">devtools</a> - network tab | <a href="https://developer.mozilla.org/en-US/docs/Glossary/TCP" target="_blank" rel="noopener noreferrer">TCP</a>: Transmission Control Protocol - ensures that packets are delivered reliably and free from errors | <a href="https://developer.mozilla.org/en-US/docs/Glossary/UDP" target="_blank" rel="noopener noreferrer">UDP</a>: User Datagram Protocol - connectionless communication model, requiring no “handshaking”, which can potentially lead to unreliability in the delivery of messages | <a href="https://www.cloudflare.com/de-de/learning/ssl/transport-layer-security-tls/" target="_blank" rel="noopener noreferrer">TLS</a>: Transport Layer Security - security protocol designed to facilitate secure data transmission via encryption - <a href="https://www.cloudflare.com/de-de/learning/ssl/what-is-ssl/" target="_blank" rel="noopener noreferrer">SSL</a> | <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="_blank" rel="noopener noreferrer">HTTP/1.1</a> | <a href="https://en.wikipedia.org/wiki/HTTP/2" target="_blank" rel="noopener noreferrer">HTTP/2</a> | <a href="https://en.wikipedia.org/wiki/HTTP/3" target="_blank" rel="noopener noreferrer">HTTP/3</a></p>
        </article>

        <article id="httpmodule">
            <h2>HTTP Module</h2>
            <p><a href="https://nodejs.dev/en/api/v19/http/#httpmethods" target="_blank" rel="noopener noreferrer">HTTP Module</a> | req object contains all of the information about an HTTP request: HTTP method (GET, POST, etc.), the pathname, headers, body, and so on | res object contains methods and properties pertaining to the generation of a response: .setHeader() (sets HTTP headers on the response), .statusCode (set the status code of the response), and .end() (dispatches the response to the client who made the request) | .listen(): port number as the first argument, which tells the server to listen for connections at the given <a href="https://en.wikipedia.org/wiki/Port_(computer_networking)" target="_blank" rel="noopener noreferrer">port</a> number - optional callback function as a second argument, allowing it to carry out a task after the server has successfully started</p>
            <pre class="code-block"><code>const http = require('http');
const server = http.createServer((req, res) => {
    res.end('Server is running!');
});

    server.listen(8080, () => {
    const { address, port } = server.address();
    console.log(`Server is listening on: http://${address}:${port}`);
})</code></pre>
<pre class="code-block"><code>const http = require('http');
const server = http.createServer(res => res.end('Hello World'));
server.listen(4001);</code></pre>

        </article>

        <article id="anatomyurl">
            <h2>The Anatomy of the URL</h2>
            <p><a href="https://en.wikipedia.org/wiki/API" target="_blank" rel="noopener noreferrer">API</a> | <a href="https://en.wikipedia.org/wiki/URL" target="_blank" rel="noopener noreferrer">URL</a> | </p>
            <img src="./url-dark.png" alt="url explained">
            <pre class="code-block"><code>const http = require('http');

const url = 'http://example.com/users/25/projects?type=personal&month=january';

// Make a GET request with the URL and process the response.
http.get(url, (res) => {
    let data = '';
    
    res.on('data', (chunk) => {
    data += chunk;
    });
    
    res.on('end', () => {
    console.log(data);
    });
});</code></pre>
        </article>

        <article id="urlmodule">
            <h2>The URL Module</h2>
            <p><a href="https://nodejs.org/api/url.html" target="_blank" rel="noopener noreferrer">url module</a> to parse the different parts of this URL easily | URL class: new URL object | once instantiated, different parts of the URL can be accessed and modified via various properties, which include: hostname - pathname -  <a href="https://nodejs.org/docs/latest-v14.x/api/url.html#url_class_urlsearchparams" target="_blank" rel="noopener noreferrer">searchParams</a>:  parameter object representing the query parameters contained within the URL | <a href="https://url.spec.whatwg.org/" target="_blank" rel="noopener noreferrer">WHATWG URL specification</a> | while the url module can be used to deconstruct a URL into its constituent parts, it can also be used to construct a URL</p>
            <pre class="code-block"><code>const url = new URL('https://www.example.com/p/a/t/h?query=string');

const host = url.hostname;
const pathname = url.pathname; // /p/a/t/h
const searchParams = url.searchParams; // {query: 'string'}</code></pre>
<pre class="code-block"><code>const createdUrl = new URL('https://www.example.com');
createdUrl.pathname = '/p/a/t/h';
createdUrl.search = '?query=string';
    
createUrl.toString(); // Creates https://www.example.com/p/a/t/h?query=string</code></pre>
        </article>

        <article id="querystringmodule">
            <h2>The Querystring Module</h2>
            <p><a href="https://nodejs.org/api/querystring.html#querystring_querystring_decode" target="_blank" rel="noopener noreferrer">querystring module</a> | .parse(): parsing a URL query string into a collection of key-value pairs | .decode() does the same | .stringify(): producing a URL query string from a given object via iteration of the object’s “own properties.” | .encode() does the same | .escape(): for performing percent-encoding on a given query string | .unescape(): to decode percent-encoded characters within a given query string | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split" target="_blank" rel="noopener noreferrer">split()</a></p>
            <pre class="code-block"><code>const str = 'prop1=value1&prop2=value2';
    querystring.parse(str); // Returns { prop1: value1, prop2: value2}</code></pre>
<pre class="code-block"><code>const props = { "prop1": value1, "prop2": value2};
    querystring.stringify(props); // Returns 'prop1=value1&prop2=value2'</code></pre>
<pre class="code-block"><code>const querystring = require('querystring');

const url = 'https://www.example.com/p/a/t/h?course=node&lesson=http';

const queryToParse = url.split('?')[1];

const parsedQuery = querystring.parse(queryToParse);

parsedQuery.exercise = 'querystring';

const modifiedQueryString = querystring.stringify(parsedQuery);

console.log(modifiedQueryString);</code></pre>
        </article>

        <article id="routing">
            <h2>Routing</h2>
            <p>process of handling requests in specific ways based on the information provided within the request | method is one important piece of information that can be used to route requests | </p>
            <pre class="code-block"><code>const server = http.createServer((req, res) => {
    const { method } = req;
    
    switch(method) {
        case 'GET':
        return handleGetRequest(req, res);
        case 'POST':
        return handlePostRequest(req, res);
        case 'DELETE':
        return handleDeleteRequest(req, res);
        case 'PUT':
        return handlePutRequest(req, res);
        default:
        throw new Error(`Unsupported request method: ${method}`);
    }
})

function handleGetRequest(req, res) {
    const { pathname } = new URL(req.url);
    let data = {};

    if (pathname === '/projects') {
        data = await getProjects();
        res.setHeader('Content-Type', 'application/json');
        return res.end(JSON.stringify(data));
    }

    res.statusCode = 404;
    return res.end('Requested resource does not exist');
}</code></pre>
        </article>

        <article id="httpstatuscodes">
            <h2>HTTP Status Codes</h2>
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status" target="_blank" rel="noopener noreferrer">HTTP response status codes</a>: <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#information_responses" target="_blank" rel="noopener noreferrer">informational</a> - <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#successful_responses" target="_blank" rel="noopener noreferrer">successful</a> - <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#redirection_messages" target="_blank" rel="noopener noreferrer">redirects</a> - <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#client_error_responses" target="_blank" rel="noopener noreferrer">client errors</a> - <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#server_error_responses" target="_blank" rel="noopener noreferrer">server errors</a> | 200 OK - 400 Bad Request - 500 Internal Server Error</p>
            <pre class="code-block"><code>const http = require('http');

const handleGetRequest = (req, res) => {
    res.statusCode = 200;
    return res.end(JSON.stringify({ data: [] }));
}

const handlePostRequest = (req, res) => {
    res.statusCode = 500;
    return res.end("Unable to create record");
}

// Creates server instance
const server = http.createServer((req, res) => {
    const { method } = req;
    
    switch(method) {
    case 'GET':
        return handleGetRequest(req, res);
    case 'POST':
        return handlePostRequest(req, res);
    default:
        throw new Error(`Unsupported request method: ${method}`);
    }
});

// Starts server listening on specified port
server.listen(4001, () => {
    const { address, port } = server.address();
    console.log(`Server is listening on: http://${address}:${port}`);
});</code></pre>
        </article>

        <article id="interactingdatabase">
            <h2>Interacting with a Database</h2>
            <pre class="code-block"><code>const http = require('http');
const fs = require('fs');

// GET request handler
const handleGetRequest = (req, res) => {
    if (req.url === '/users') {
    // Loads the database and searches for data
    makeDatabaseRequest('users', (err, payload) => {
        if (err) {
        res.writeHeader(400);
        res.write("Error retrieving data");
        } else {
        // Process successful request
        res.writeHeader(200, {"Content-Type": "application/json"});  
        res.write(JSON.stringify(payload));
        console.log(payload);
        }
        res.end(); 
    });
    }
}

// Creates server instance
const server = http.createServer((req, res) => {
    const { method } = req;
    
    switch(method) {
    case 'GET':
        return handleGetRequest(req, res);
    default:
        throw new Error(`Unsupported request method: ${method}`);
    }
});

// Starts server listening on specified port
server.listen(4001, () => {
    const { address, port } = server.address();
    console.log(`Server is listening on: http://${address}:${port}`);
});

function makeDatabaseRequest(type, cb) {
    fs.readFile('./database.json', 'utf8', function (err, payload) {
    if (err) {
        cb(err, null); 
    } else {
        cb(null, JSON.parse(payload)[type]);
    }
    });
}</code></pre>
        </article>

        <article id="interactingapi">
            <h2>Interacting with Another Backend API</h2>
            <pre class="code-block"><code>const http = require('http');
const https = require('https');

const handleGetRequest = (req, res) => {
    const options = {
    hostname: 'static-assets.codecademy.com',
    path: '/Courses/Learn-Node/http/data.json',
    method: 'GET',
    headers: {
        'Content-Type': 'application/json'
    }
    }
    
    const request = https.request(options, response => {
    let data = '';

    // Aggregate data chunks as they come in from the API
    response.on('data', (chunk) => {
        data += chunk;
    });

    // Handle the end of the request
    response.on('end', () => {
        console.log("Retrieved Data:", data);
        res.end(data);
    });
    });

    request.end();
}

// Creates server instance
const server = http.createServer((req, res) => {
    const { method } = req;
    
    switch(method) {
    case 'GET':
        return handleGetRequest(req, res);
    default:
        throw new Error(`Unsupported request method: ${method}`);
    }
});

// Starts server listening on specified port
server.listen(4001, () => {
    const { address, port } = server.address();
    console.log(`Server is listening on: http://${address}:${port}`);
});</code></pre>
        </article>

        <article id="rest">
            <h2>REST</h2>
            <p>REpresentational State Transfer | <a href="https://www.codecademy.com/courses/learn-node-js/articles/what-is-rest" target="_blank" rel="noopener noreferrer">article</a></p>

        </article>

    </main>
</body>
</html>